



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://github.com/sadoyan/puypuy/agent/hashicorp/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="/assets/images/home_white.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-4.4.3">
    
    
      
        <title>Hashicorp - Cloud scale intelligent monitoring & analytics platform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.4031d38b.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.3e3d1dff.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/bootstrap.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#nomad" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
<header class="md-header" data-md-component="header">
    <nav class="md-header-nav xl-grid">
        <div class="md-flex">
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="https://sadoyan.github.io/puypuydocs/" title="PuyPuy" class="md-header-nav__button md-logo">         
                    <img src="../../images/logomin.png" width="65">            
                </a>        
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="https://github.com/sadoyan/puypuy/" title="Home" class="home">
                                
<!--                    <img src="/assets/images/home_white.png" width="35" height="30">              -->
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="35" height="28" viewBox="0 0 640 640" class="icon">
                        <path d="M640 409.027l-320-248.391-320 248.392v-101.274l320-248.391 320 248.393zM560 400v240h-160v-160h-160v160h-160v-240l240-180z"></path>
                    </svg>
                    
                </a>
            </div>
            
            <div class="md-flex__cell md-flex__cell--shrink">
                <div class="md-header-nav__source">
                    


  

<a href="https://github.com/sadoyan/puypuy" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
                </div>
            </div>
              
            <div class="md-flex__cell md-flex__cell--shrink">
                <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch">
                <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">                                       
                    <span class="md-header-nav__topic">
                       Cloud scale intelligent monitoring & analytics platform
                    </span>
                    <span class="md-header-nav__topic">
                        Hashicorp
                    </span>                   
                </div>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                
                <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
                
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
                
            </div>      
        </div>
    </nav>
</header>

    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner xl-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
<!--  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/sadoyan/puypuy/" title="Cloud scale intelligent monitoring & analytics platform" class="md-nav__button md-logo">
      
        <img src="../../images/logomin.png" width="48" height="48">
      
    </a>
    Cloud scale intelligent monitoring & analytics platform
  </label>-->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/sadoyan/puypuy" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../system/" title="System Checks" class="md-nav__link">
      System Checks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nvidia/" title="Nvidia GPU" class="md-nav__link">
      Nvidia GPU
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker/" title="Docker Containers" class="md-nav__link">
      Docker Containers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      WEB Servers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        WEB Servers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/apache/" title="Apache" class="md-nav__link">
      Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/nginx/" title="NginX" class="md-nav__link">
      NginX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/php/" title="PHP-FPM" class="md-nav__link">
      PHP-FPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/tomcat/" title="Tomcat" class="md-nav__link">
      Tomcat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/jetty/" title="Jetty" class="md-nav__link">
      Jetty
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/lighty/" title="Lighttpd" class="md-nav__link">
      Lighttpd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/rest/" title="HTTP API" class="md-nav__link">
      HTTP API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Load Balancers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Load Balancers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/haproxy/" title="HAProxy" class="md-nav__link">
      HAProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/envoy/" title="Envoy" class="md-nav__link">
      Envoy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/traefik/" title="Traefik" class="md-nav__link">
      Traefik
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cassandra/" title="Cassandra" class="md-nav__link">
      Cassandra
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ceph/" title="Ceph" class="md-nav__link">
      Ceph
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../lizardfs/" title="LizardFS" class="md-nav__link">
      LizardFS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../couch/" title="CouchBase, CouchDB" class="md-nav__link">
      CouchBase, CouchDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../elastic/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../solr/" title="Solr" class="md-nav__link">
      Solr
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hadoop/" title="Hadoop" class="md-nav__link">
      Hadoop
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hbase/" title="HBase" class="md-nav__link">
      HBase
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jmx/" title="Java JMX" class="md-nav__link">
      Java JMX
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jolokia/" title="Jolokia" class="md-nav__link">
      Jolokia
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Hashicorp
      </label>
    
    <a href="./" title="Hashicorp" class="md-nav__link md-nav__link--active">
      Hashicorp
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nomad" class="md-nav__link">
    Nomad
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consul" class="md-nav__link">
    Consul
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install_1" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_1" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart_1" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides_1" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vault" class="md-nav__link">
    Vault
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install_2" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_2" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart_2" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides_2" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../etcd/" title="Etcd" class="md-nav__link">
      Etcd
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../coredns/" title="Coredns" class="md-nav__link">
      Coredns
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mesos/" title="Mesos" class="md-nav__link">
      Mesos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rabbitmq/" title="RabbitMQ" class="md-nav__link">
      RabbitMQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../activemq/" title="ActiveMQ" class="md-nav__link">
      ActiveMQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rrs/" title="Redis, Memcached" class="md-nav__link">
      Redis, Memcached
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../riak/" title="Riak" class="md-nav__link">
      Riak
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../fdb/" title="FoundationDB" class="md-nav__link">
      FoundationDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../storm/" title="Apache Storm" class="md-nav__link">
      Apache Storm
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../spark/" title="Apache Spark" class="md-nav__link">
      Apache Spark
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../zookeeper/" title="Zookeeper" class="md-nav__link">
      Zookeeper
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../snmp/" title="SNMP" class="md-nav__link">
      SNMP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../k8s/" title="Kubernetes" class="md-nav__link">
      Kubernetes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../scylla/" title="Scylla" class="md-nav__link">
      Scylla
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nagios/" title="Nagios/Icinga" class="md-nav__link">
      Nagios/Icinga
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../custom/" title="Custom Checks" class="md-nav__link">
      Custom Checks
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nomad" class="md-nav__link">
    Nomad
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consul" class="md-nav__link">
    Consul
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install_1" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_1" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart_1" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides_1" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vault" class="md-nav__link">
    Vault
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install_2" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure_2" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart_2" class="md-nav__link">
    Restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provides_2" class="md-nav__link">
    Provides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
<!--                
                  <a href="https://github.com/sadoyan/puypuy/edit/master/docs/agent/hashicorp.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                -->
    
     <h1></h1>
         
<h3 id="nomad"><strong>Nomad</strong></h3>
<p><img alt="Nomad" src="../../images/nomad.png" /></p>
<p>Nomad exposes metrics via HTTP/Json out of the box, so all you need is just to symlink <code>checks_available/check_hashicorp_nomad_py</code> to <code>checks_enabled</code> and restart Agent.</p>
<h5 id="install"><strong>Install</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/checks_enabled
ln<span class="w"> </span>-s<span class="w"> </span>../checks_available/check_hashicorp_nomad_py<span class="w"> </span>./
</code></pre></div>

<h5 id="configure"><strong>Configure</strong></h5>
<p>At most of cases there is no need to configure <strong>Agent</strong>, but if you have non default installation of Nomad, 
or if you need to monitor remote Nomad, edit <code>conf/hashicorp.ini</code> and make your changes at Hashicorp-Nomad section. 
Nomad also exposes metrics per running job, which fo some installations can create tens even hundreds os metrics. 
If you do not want to monitor these metrics set <code>jobstats: False</code> st config file.   </p>
<div class="codehilite"><pre><span></span><code><span class="k">[Hashicorp-Nomad]</span>
<span class="na">telemetery</span><span class="o">:</span><span class="w"> </span><span class="s">http://127.0.0.1:4646/v1/metrics</span>
<span class="na">jobstats</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
</code></pre></div>

<h5 id="restart"><strong>Restart</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/puypuy.sh<span class="w"> </span>restart
</code></pre></div>

<h5 id="provides"><strong>Provides</strong></h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>nomad_client_allocated_cpu</td>
<td>Total amount of CPU shares the scheduler has allocated to task</td>
<td>gauge</td>
<td>MHz</td>
</tr>
<tr>
<td>nomad_client_unallocated_cpu</td>
<td>Total amount of CPU shares free for the scheduler to allocate to tasks</td>
<td>gauge</td>
<td>MHz</td>
</tr>
<tr>
<td>nomad_client_allocated_memory</td>
<td>Total amount of memory the scheduler has allocated to tasks</td>
<td>gauge</td>
<td>Megabytes</td>
</tr>
<tr>
<td>nomad_client_unallocated_memory</td>
<td>Total amount of memory free for the scheduler to allocate to tasks</td>
<td>gauge</td>
<td>Megabytes</td>
</tr>
<tr>
<td>nomad_client_allocated_disk</td>
<td>Total amount of disk space the scheduler has allocated to tasks</td>
<td>gauge</td>
<td>Megabytes</td>
</tr>
<tr>
<td>nomad_client_unallocated_disk</td>
<td>Total amount of disk space free for the scheduler to allocate to tasks</td>
<td>gauge</td>
<td>Megabytes</td>
</tr>
<tr>
<td>nomad_client_allocated_network</td>
<td>Total amount of bandwidth the scheduler has allocated to tasks on the given device</td>
<td>gauge</td>
<td>Megabits</td>
</tr>
<tr>
<td>nomad_client_unallocated_network</td>
<td>Total amount of bandwidth free for the scheduler to allocate to tasks on the given device</td>
<td>gauge</td>
<td>Megabits</td>
</tr>
<tr>
<td>nomad_job_summary_queued</td>
<td>Number of queued allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_job_summary_complete</td>
<td>Number of complete allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_job_summary_failed</td>
<td>Number of failed allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_job_summary_running</td>
<td>Number of running allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_job_summary_starting</td>
<td>Number of starting allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_job_summary_lost</td>
<td>Number of lost allocations for a job</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_runtime_num_goroutines</td>
<td>Number of goroutines and general load pressure indicator</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_runtime_alloc_bytes</td>
<td>Memory utilization</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>nomad_runtime_heap_objects</td>
<td>Number of objects on the heap. General memory pressure indicator</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>nomad_heartbeat_active</td>
<td>Number of active heartbeat timers. Each timer represents a Nomad Client connection</td>
<td>gauge</td>
<td>None</td>
</tr>
</tbody>
</table>
<h3 id="consul"><strong>Consul</strong></h3>
<p><img alt="Consul" src="../../images/consul.png" /></p>
<p>Consul exposes metrics via HTTP/Json out of the box, so all you need is just to symlink <code>checks_available/check_hashicorp_consul_py</code> to <code>checks_enabled</code> and restart Agent.</p>
<h5 id="install_1"><strong>Install</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/checks_enabled
ln<span class="w"> </span>-s<span class="w"> </span>../checks_available/check_hashicorp_consul_py<span class="w"> </span>./
</code></pre></div>

<h5 id="configure_1"><strong>Configure</strong></h5>
<p>At most of cases there is no need to configure <strong>Agent</strong>, but if you have non default installation of Consul, 
or if you need to monitor remote Consul, edit <code>conf/hashicorp.ini</code> and make your changes at Hashicorp-Consul section. 
Consul also exposes detailed metrics, with rates and counters, so if youwant to see these metrics set <code>detailed: True</code> for getting rated stats set <code>getrates: True</code></p>
<div class="codehilite"><pre><span></span><code><span class="k">[Hashicorp-Consul]</span>
<span class="na">telemetery</span><span class="o">:</span><span class="w"> </span><span class="s">http://127.0.0.1:8500/v1/agent/metrics</span>
<span class="na">detailed</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">getrates</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
</code></pre></div>

<h5 id="restart_1"><strong>Restart</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/puypuy.sh<span class="w"> </span>restart
</code></pre></div>

<h5 id="provides_1"><strong>Provides</strong></h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>consul_memberlist_tcp_connect</td>
<td>This metric counts the number of times an agent has initiated a push/pull sync with an other agent.</td>
<td>counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_memberlist_tcp_sent</td>
<td>This metric measures the total number of bytes sent by an agent through the TCP protocol.</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_memberlist_udp_received</td>
<td>This metric measures the total number of bytes received by an agent through the UDP protocol.</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_memberlist_udp_sent</td>
<td>This metric measures the total number of bytes sent by an agent through the UDP protocol.</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_rpc_accept_conn</td>
<td>This metric counts the number of RPC prorocol accepted connections</td>
<td>counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_rpc_request</td>
<td>This metric counts the number of RPC prorocol requests</td>
<td>counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_runtime_alloc_bytes</td>
<td>This metric measures runtime bytes allocated by Agent</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_runtime_free_count</td>
<td>This metric measures runtime bytes freed by Agent</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_runtime_heap_objects</td>
<td>This metric measures amount of objects in Agent's heap</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_runtime_sys_bytes</td>
<td>This metric measures runtime system bytes freed by Agent</td>
<td>counter</td>
<td>bytes</td>
</tr>
<tr>
<td>consul_runtime_total_gc_pause_ns</td>
<td>This metric measures Agent's GC pauses.</td>
<td>counter</td>
<td>nanosecond</td>
</tr>
<tr>
<td>consul_runtime_total_gc_runs</td>
<td>This metric measures Agent's GC runs.</td>
<td>counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_session_ttl_active</td>
<td>This metric measures active TTL sessions.</td>
<td>counter</td>
<td>integer</td>
</tr>
</tbody>
</table>
<p><strong>Detailed</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>consul_fsm.coordinate.batch.update</td>
<td>This measures the time it takes to apply the given batch coordinate update to the FSM.</td>
<td>gauge</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_http_get_v1_agent_checks</td>
<td>This metric gives the number Agen'ts check HTTP GET requests</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_http_get_v1_agent_metrics</td>
<td>This metric gives the number Agen'ts metric HTTP GET requests</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_http_get_v1_agent_self</td>
<td>This metric gives the number Agen'ts self HTTP GET requests</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_http_get_v1_agent_services</td>
<td>This metric gives the number Agen'ts service HTTP GET requests</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_memberlist_gossip</td>
<td>This metric gives the number of gossips (messages) broadcasted to a set of randomly selected nodes.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_memberlist_probenode</td>
<td>This metric measures the time taken to perform a single round of failure detection on a select agent.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_raft_fsm_apply</td>
<td>This metric gives the number of logs committed since the last interval.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_raft_rpc_appendentries</td>
<td>This metric measures the time taken to process an append entries RPC call from an agent.</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_raft_rpc_appendentries_processlogs</td>
<td>This metric measures the time taken to add any outstanding logs for an agent, since the last appendEntries was invoked</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_raft_rpc_appendentries_storelogs</td>
<td>This metric measures the time taken to process the outstanding log entries of an agent.</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_raft_rpc_processheartbeat</td>
<td>This metric measures the time taken to process a heartbeat request.</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_runtime_gc_pause_ns</td>
<td>This metric measures the Golang GC runtime pauses.</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_serf_coordinate_adjustment_ms</td>
<td>This metric measures the coordinate adjustments in milliseconds.</td>
<td>rate\counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>consul_serf_queue_event</td>
<td>This metric measures events in sef queue.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_serf_queue_intent</td>
<td>This metric measures intents in sef queue.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
<tr>
<td>consul_serf_queue_query</td>
<td>This metric measures queries in sef queue.</td>
<td>rate\counter</td>
<td>integer</td>
</tr>
</tbody>
</table>
<h3 id="vault"><strong>Vault</strong></h3>
<p><img alt="Vault" src="../../images/vault.png" /></p>
<p>Vault exposes metrics via HTTP/Json out of the box, so all you need is just to symlink <code>checks_available/check_hashicorp_consul_py</code> to <code>checks_enabled</code> and restart Agent.</p>
<h5 id="install_2"><strong>Install</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/checks_enabled
ln<span class="w"> </span>-s<span class="w"> </span>../checks_available/check_hashicorp_vault_py<span class="w"> </span>./
</code></pre></div>

<h5 id="configure_2"><strong>Configure</strong></h5>
<p>At most of cases there is no need to change telemetry link, but if you have non default installation of Vault, 
or if you need to monitor remote Vault, edit <code>conf/hashicorp.ini</code> and make your changes at Hashicorp-Vault section. 
Also it is very important to set correct token in config file, or Vault will deny requests from PuyPuy Agent 
Vault also exposes detailed metrics, with rates and counters, so if youwant to see these metrics set <code>detailed: True</code> for getting rated stats set <code>getrates: True</code></p>
<div class="codehilite"><pre><span></span><code><span class="k">[Hashicorp-Vault]</span>
<span class="na">telemetery</span><span class="o">:</span><span class="w"> </span><span class="s">http://127.0.0.1:8200/v1/sys/metrics</span>
<span class="na">token</span><span class="o">:</span><span class="w"> </span><span class="s">s.HqQb7CFNBT1wHWLHD0DrOx6P</span>
<span class="na">detailed</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">getrates</span><span class="o">:</span><span class="w"> </span><span class="s">False</span>
</code></pre></div>

<h5 id="restart_2"><strong>Restart</strong></h5>
<div class="codehilite"><pre><span></span><code><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/puypuy.sh<span class="w"> </span>restart
</code></pre></div>

<h5 id="provides_2"><strong>Provides</strong></h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>vault_expire_num_leases</td>
<td>This metric gives the number of expired leases.</td>
<td>gauge</td>
<td>integer</td>
</tr>
<tr>
<td>vault_runtime_alloc_bytes</td>
<td>This metric shows amount of memory allocated by Vault process.</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>vault_runtime_free_count</td>
<td>This metric shows Number of freed objects</td>
<td>gauge</td>
<td>integer</td>
</tr>
<tr>
<td>vault_runtime_heap_objects</td>
<td>This metric gives the number of objects in Vaulr process's heap.</td>
<td>gauge</td>
<td>integer</td>
</tr>
<tr>
<td>vault_runtime_malloc_count</td>
<td>This metric shows cumulative count of allocated heap objects</td>
<td>gauge</td>
<td>integer</td>
</tr>
<tr>
<td>vault_runtime_num_goroutines</td>
<td>Number of goroutines and general load pressure indicator</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>vault_runtime_sys_bytes</td>
<td>This includes what is being used by Vault's heap and what has been reclaimed but not given back to the operating system.</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>vault_runtime_total_gc_pause_ns</td>
<td>This metric measures the Golang GC runtime pauses.</td>
<td>counter</td>
<td>millisecond</td>
</tr>
<tr>
<td>vault_runtime_total_gc_runs</td>
<td>This metric measures Agent's GC runs.</td>
<td>counter</td>
<td>integer</td>
</tr>
</tbody>
</table>
<p><strong>Detailed</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>vault_audit_log_request</td>
<td>Duration of time taken by all audit log requests across all audit log devices</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_audit_log_response</td>
<td>Duration of time taken by audit log responses across all audit log devices</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_barrier_get</td>
<td>Duration of time taken by GET operations at the barrier</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_barrier_put</td>
<td>Duration of time taken by PUT operations at the barrier</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_barrier_delete</td>
<td>Duration of time taken by DELETE operations at the barrier</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_barrier_list</td>
<td>Duration of time taken by LIST operations at the barrier</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_core_check_token</td>
<td>Duration of time taken by token checks handled by Vault core</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_core_fetch_acl_and_token</td>
<td>Duration of time taken by ACL and corresponding token entry fetches handled by Vault core</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_core_handle_request</td>
<td>Duration of time taken by requests handled by Vault core</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_policy_get_policy</td>
<td>Time taken to GET a policy</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_policy_list_policy</td>
<td>Time taken to LIST a policy</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_policy_set_policy</td>
<td>Time taken to SET a policy</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_policy_delete_policy</td>
<td>Time taken to DELETE a policy</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_token_lookup</td>
<td>The time taken to look up a token</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_auth_token_</td>
<td>Time taken to perform a rollback operation for the token auth method</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_auth_ldap_</td>
<td>Time taken to perform a rollback operation for the LDAP auth method</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_cubbyhole_</td>
<td>Time taken to perform a rollback operation for the Cubbyhole secret backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_identity_</td>
<td>Time taken to perform a rollback operation for the Identity backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_secret_</td>
<td>Time taken to perform a rollback operation for the K/V secret backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_rollback_attempt_sys_</td>
<td>Time taken to perform a rollback operation for the system backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_read_sys_</td>
<td>Time taken to perform a route rollback operation for the system backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_auth_token_</td>
<td>Time taken to perform a route rollback operation for the token auth method</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_cubbyhole_</td>
<td>Time taken to perform a route rollback operation for the Cubbyhole secret backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_identity_</td>
<td>Time taken to perform a route rollback operation for the Identity</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_secret_</td>
<td>Time taken to perform a route rollback operation for the K/V secret backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_sys_</td>
<td>Time taken to perform a route rollback operation for the system backend</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
<tr>
<td>vault_route_rollback_ldap_</td>
<td>Time taken to perform a route rollback operation for the LDAP auth method</td>
<td>counter\rate</td>
<td>milliseconds</td>
</tr>
</tbody>
</table>




              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../kafka/" title="Kafka" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Kafka
              </span>
            </div>
          </a>
        
        
          <a href="../etcd/" title="Etcd" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Etcd
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.718059d6.js"></script>
      
      <script>app.initialize({version:"1.4.2",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/jquery.min.js"></script>
      
        <script src="../../javascripts/bootstrap.min.js"></script>
      
    
  </body>
</html>