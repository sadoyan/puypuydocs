



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://github.com/sadoyan/puypuy/agent/system/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="/assets/images/home_white.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-4.4.3">
    
    
      
        <title>System Checks - Cloud scale intelligent monitoring & analytics platform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.4031d38b.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.3e3d1dff.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/bootstrap.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#linux-os-monitoring" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
<header class="md-header" data-md-component="header">
    <nav class="md-header-nav xl-grid">
        <div class="md-flex">
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="https://sadoyan.github.io/puypuydocs/" title="PuyPuy" class="md-header-nav__button md-logo">         
                    <img src="../../images/logomin.png" width="65">            
                </a>        
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="https://github.com/sadoyan/puypuy/" title="Home" class="home">
                                
<!--                    <img src="/assets/images/home_white.png" width="35" height="30">              -->
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="35" height="28" viewBox="0 0 640 640" class="icon">
                        <path d="M640 409.027l-320-248.391-320 248.392v-101.274l320-248.391 320 248.393zM560 400v240h-160v-160h-160v160h-160v-240l240-180z"></path>
                    </svg>
                    
                </a>
            </div>
            
            <div class="md-flex__cell md-flex__cell--shrink">
                <div class="md-header-nav__source">
                    


  

<a href="https://github.com/sadoyan/puypuy" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
                </div>
            </div>
              
            <div class="md-flex__cell md-flex__cell--shrink">
                <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch">
                <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">                                       
                    <span class="md-header-nav__topic">
                       Cloud scale intelligent monitoring & analytics platform
                    </span>
                    <span class="md-header-nav__topic">
                        System Checks
                    </span>                   
                </div>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                
                <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
                
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
                
            </div>      
        </div>
    </nav>
</header>

    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner xl-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
<!--  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/sadoyan/puypuy/" title="Cloud scale intelligent monitoring & analytics platform" class="md-nav__button md-logo">
      
        <img src="../../images/logomin.png" width="48" height="48">
      
    </a>
    Cloud scale intelligent monitoring & analytics platform
  </label>-->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/sadoyan/puypuy" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        System Checks
      </label>
    
    <a href="./" title="System Checks" class="md-nav__link md-nav__link--active">
      System Checks
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#linux-os-monitoring" class="md-nav__link">
    Linux OS Monitoring
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart" class="md-nav__link">
    Restart
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    Memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    Disk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-conntrack" class="md-nav__link">
    IP Conntrack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-average" class="md-nav__link">
    Load Average
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-connections" class="md-nav__link">
    TCP Connections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#btrfs-check" class="md-nav__link">
    BTRFS check
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nvidia/" title="Nvidia GPU" class="md-nav__link">
      Nvidia GPU
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker/" title="Docker Containers" class="md-nav__link">
      Docker Containers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      WEB Servers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        WEB Servers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/apache/" title="Apache" class="md-nav__link">
      Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/nginx/" title="NginX" class="md-nav__link">
      NginX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/php/" title="PHP-FPM" class="md-nav__link">
      PHP-FPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/tomcat/" title="Tomcat" class="md-nav__link">
      Tomcat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/jetty/" title="Jetty" class="md-nav__link">
      Jetty
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/lighty/" title="Lighttpd" class="md-nav__link">
      Lighttpd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ws/rest/" title="HTTP API" class="md-nav__link">
      HTTP API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Load Balancers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Load Balancers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/haproxy/" title="HAProxy" class="md-nav__link">
      HAProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/envoy/" title="Envoy" class="md-nav__link">
      Envoy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lb/traefik/" title="Traefik" class="md-nav__link">
      Traefik
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cassandra/" title="Cassandra" class="md-nav__link">
      Cassandra
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ceph/" title="Ceph" class="md-nav__link">
      Ceph
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../lizardfs/" title="LizardFS" class="md-nav__link">
      LizardFS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../couch/" title="CouchBase, CouchDB" class="md-nav__link">
      CouchBase, CouchDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../elastic/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../solr/" title="Solr" class="md-nav__link">
      Solr
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hadoop/" title="Hadoop" class="md-nav__link">
      Hadoop
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hbase/" title="HBase" class="md-nav__link">
      HBase
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jmx/" title="Java JMX" class="md-nav__link">
      Java JMX
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../jolokia/" title="Jolokia" class="md-nav__link">
      Jolokia
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hashicorp/" title="Hashicorp" class="md-nav__link">
      Hashicorp
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../etcd/" title="Etcd" class="md-nav__link">
      Etcd
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../coredns/" title="Coredns" class="md-nav__link">
      Coredns
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mesos/" title="Mesos" class="md-nav__link">
      Mesos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../marathon/" title="Marathon" class="md-nav__link">
      Marathon
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rabbitmq/" title="RabbitMQ" class="md-nav__link">
      RabbitMQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../activemq/" title="ActiveMQ" class="md-nav__link">
      ActiveMQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rrs/" title="Redis, Memcached" class="md-nav__link">
      Redis, Memcached
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../riak/" title="Riak" class="md-nav__link">
      Riak
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../fdb/" title="FoundationDB" class="md-nav__link">
      FoundationDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../storm/" title="Apache Storm" class="md-nav__link">
      Apache Storm
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../spark/" title="Apache Spark" class="md-nav__link">
      Apache Spark
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../zookeeper/" title="Zookeeper" class="md-nav__link">
      Zookeeper
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../snmp/" title="SNMP" class="md-nav__link">
      SNMP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../k8s/" title="Kubernetes" class="md-nav__link">
      Kubernetes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../scylla/" title="Scylla" class="md-nav__link">
      Scylla
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nagios/" title="Nagios/Icinga" class="md-nav__link">
      Nagios/Icinga
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../custom/" title="Custom Checks" class="md-nav__link">
      Custom Checks
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#linux-os-monitoring" class="md-nav__link">
    Linux OS Monitoring
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure" class="md-nav__link">
    Configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart" class="md-nav__link">
    Restart
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    Memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    Disk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-conntrack" class="md-nav__link">
    IP Conntrack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-average" class="md-nav__link">
    Load Average
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-connections" class="md-nav__link">
    TCP Connections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#btrfs-check" class="md-nav__link">
    BTRFS check
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
<!--                
                  <a href="https://github.com/sadoyan/puypuy/edit/master/docs/agent/system.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                -->
    
     <h1></h1>
         
<h2 id="linux-os-monitoring"><strong>Linux OS Monitoring</strong></h2>
<h4 id="install"><strong>Install</strong></h4>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/checks_enabled
ln<span class="w"> </span>-s<span class="w"> </span>../checks_available/<span class="o">{</span>check_cpustats.py,check_disks.py,check_load_average.py,check_memory.py,check_network_bytes.py<span class="o">}</span><span class="w"> </span>./
</code></pre></div>

<h4 id="configure"><strong>Configure</strong></h4>
<p>For most of installations, our defaults works well, but you can edit <code>conf/system.ini</code> if you need fine tuning. 
For each of system check you van enable or disable static alerts and set appropriate thresholds. </p>
<div class="codehilite"><pre><span></span><code><span class="k">[Load Average]</span>
<span class="na">static_enabled</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">high</span><span class="o">:</span><span class="w"> </span><span class="s">95</span>
<span class="na">severe</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">100</span>

<span class="k">[Disk Stats]</span>
<span class="na">static_enabled</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">high</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">90</span>
<span class="na">severe</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">95</span>

<span class="k">[Memory Stats]</span>
<span class="na">static_enabled</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">high</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">90</span>
<span class="na">severe</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">95</span>

<span class="k">[CPU Stats]</span>
<span class="na">static_enabled</span><span class="o">:</span><span class="w"> </span><span class="s">True</span>
<span class="na">percore_stats</span><span class="o">:</span><span class="w"> </span><span class="s">False</span>
<span class="na">high</span><span class="o">:</span><span class="w"> </span><span class="s">90</span>
<span class="na">severe</span><span class="o">:</span><span class="w"> </span><span class="s">95</span>

<span class="k">[Network Stats]</span>
<span class="na">localhost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
<span class="na">rated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</code></pre></div>

<h4 id="restart"><strong>Restart</strong></h4>
<div class="codehilite"><pre><span></span><code><span class="si">${</span><span class="nv">PUYPUY_HOME</span><span class="si">}</span>/puypuy.sh<span class="w"> </span>restart
</code></pre></div>

<h5 id="cpu"><strong>CPU</strong></h5>
<p>System CPU statistics are collected via check_cpustats.py module: It reads /proc/stat file for CPU related information. 
The Check does not require any additional dependencies, and it should provide following metrics: </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpu_idle</td>
<td>percent of free CPU resources</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_iowait</td>
<td>CPU percent spent on waiting for I/O operation</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_irq</td>
<td>CPU percent spent on handling hardware interrupts</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_load</td>
<td>Total CPU/Core load percent</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_nice</td>
<td>CPU percent of processing user level processes with positive nice</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_softirq</td>
<td>CPU percent spent on handling soft interrupts</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_system</td>
<td>CPU percent of processing system level processes</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>cpu_user</td>
<td>CPU percent of processing user level processes</td>
<td>gauge</td>
<td>Percent</td>
</tr>
</tbody>
</table>
<h5 id="memory"><strong>Memory</strong></h5>
<p>Collected via check_memory.py module, it takes memory related information from /proc/meminfo file, and provides following metrics: </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>mem_active</td>
<td>Memory that is being used by a particular process</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_available</td>
<td>Not active / free memory</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_buffers</td>
<td>The total amount of memory used for critical system buffers</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_cached</td>
<td>Amount of cached data. Freeâ€™d if there is not enough free memory in the system.</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_inactive</td>
<td>Memory that was allocated to a process that is no longer running</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_swapcached</td>
<td>Amount of swapped memory</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_total</td>
<td>Total amount of memory</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>mem_used_percent</td>
<td>Aggregated from metrics above, total memory usage percentage</td>
<td>gauge</td>
<td>Percent</td>
</tr>
</tbody>
</table>
<h5 id="disk"><strong>Disk</strong></h5>
<p>Collected via check_disks.py module, this check uses several resources, to provide statistics about disk IO and Space usage. 
Read/write statistics are taken from /sys/block/{DISK_NAME}/stat files, also we use Linux df command, to get information about space usage. 
IO statistics are taken from /proc/diskstats. For each disk we take following metrics: </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>drive_bytes_available</td>
<td>Amounts of unused bytes</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>drive_bytes_used</td>
<td>Amounts of used bytes</td>
<td>gauge</td>
<td>Bytes</td>
</tr>
<tr>
<td>drive_io_percent_used</td>
<td>Percent of used IO resources  per second of disk drive</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>drive_percent_used</td>
<td>Percentage of disk space usage</td>
<td>gauge</td>
<td>Percent</td>
</tr>
<tr>
<td>drive_reads</td>
<td>Read operations per second performed on disk drive</td>
<td>rate</td>
<td>Bytes</td>
</tr>
<tr>
<td>drive_writes</td>
<td>Write operations per second performed on disk drive</td>
<td>rate</td>
<td>Bytes</td>
</tr>
</tbody>
</table>
<h5 id="network"><strong>Network</strong></h5>
<p>Collected via check_network_bytes.py module, It collects metrics about all installed interfaces by reading /sys/class/net/{NIC}/statistics/rx_bytes file. </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>bytes_rx</td>
<td>Amounts of received bytes</td>
<td>rate</td>
<td>Bytes</td>
</tr>
<tr>
<td>bytes_tx</td>
<td>Amounts of sent bytes</td>
<td>rate</td>
<td>Bytes</td>
</tr>
</tbody>
</table>
<h5 id="ip-conntrack"><strong>IP Conntrack</strong></h5>
<p>Enable this module only if you use connection tracking. 
This check makes sense, if you have router like system, 
or if by some reason  nf_conntrack kernel module is loaded. 
It reads /proc/sys/net/ipv4/netfilter/ip_conntrack_max|ip_conntrack_count files and provides : </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>conntrack_max</td>
<td>Maximum configured Conntack value</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>conntrack_cur</td>
<td>Current IP Conntack value</td>
<td>gauge</td>
<td>None</td>
</tr>
</tbody>
</table>
<h5 id="load-average"><strong>Load Average</strong></h5>
<p>This is one of the most important metrics in Linux (Maybe even the most). 
System load average shows ammount of processes, waiting in queue for CPU. 
It is calculater by 1,5 and 15 minute averages.In most of live systems it must have a value, 
which is less than total amount of CPUs detected by system. 
For example of your Server is equiped with 2x Quad cores CPUs, 
with enabled hyper trading Linux will see 16 CPUs, so Load Average should be below 16. Our check provides: </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>sys_load_1</td>
<td>System load average for last minute</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>sys_load_5</td>
<td>System load average for last 5 minutes</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>sys_load_15</td>
<td>System load average for last 15 minutes</td>
<td>gauge</td>
<td>None</td>
</tr>
</tbody>
</table>
<p>As regular checks and also triggers special WARNING, when value of sys_load_1 is more that 90%  of amount of CPU cores and ERROR,
 when its equal or more that 100%. This behavior can be changed by editing check_load_average.py and changing : </p>
<div class="codehilite"><pre><span></span><code><span class="na">warn_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">90</span>
<span class="na">crit_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">100</span>
</code></pre></div>

<p>to desired values. However these values are quite reasonable so, use it without modifications, if you are not for 100% sure that you need to change it </p>
<h5 id="tcp-connections"><strong>TCP Connections</strong></h5>
<p>This check provides status of TCP connections to systems.  It parses <code>/proc/net/tcp</code> and provides following metrics. </p>
<p><strong>Provides</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>tcp_close</td>
<td>TCP connections with CLOSED state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_close_wait</td>
<td>The remote side has been shut down and is now waiting for the socket to close</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_closing</td>
<td>TCP connections in  closing state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_established</td>
<td>The socket has a connection established</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_fin_wait1</td>
<td>The socket is closed, and the connection is now shutting down.</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_last_ack</td>
<td>TCP connections in  last ack state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_listen</td>
<td>TCP listening sockets</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_max_states</td>
<td>TCP connections in  max state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_new_syn_recv</td>
<td>TCP connections in  new syn recv state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_syn_recv</td>
<td>TCP connections in  syn recvstate</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_syn_sent</td>
<td>TCP connections in  syn recv state</td>
<td>gauge</td>
<td>None</td>
</tr>
<tr>
<td>tcp_time_wait</td>
<td>TCP connections in  time wait state</td>
<td>gauge</td>
<td>None</td>
</tr>
</tbody>
</table>
<p>On some very heavy loaded systems, this check may become expensive, 
please make sure its suits your system resources before enabling it on systems with 20k+ TCP ESTABLISHED connections.   </p>
<h5 id="btrfs-check"><strong>BTRFS check</strong></h5>
<p>BTRFS check can be very useful in combinations with regular Drive IO checks on systems which uses BTRFS file system. 
Its monitors BTRFS volumes and checks for volume errors. 
It also contains <code>special</code> check which will send manually defined <code>ERROR</code> and <code>WARNING</code> messages if values of checked parameters are above Zero.
Manual Error handling can be enabled or disable by setting up <code>enable_special</code> variable at the top of script. Its accepts <code>True</code> or <code>False</code> parameters, defaults is <code>True</code>.  </p>
<p><strong>Provides</strong></p>
<div class="codehilite"><pre><span></span><code>btrfs_dev_{NAME}_corruption_errs
btrfs_dev_{NAME}_flush_io_errs
btrfs_dev_{NAME}_generation_errs
btrfs_dev_{NAME}_read_io_errs
btrfs_dev_{NAME}_write_io_errs
</code></pre></div>




              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="../nvidia/" title="Nvidia GPU" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Nvidia GPU
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.718059d6.js"></script>
      
      <script>app.initialize({version:"1.4.2",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/jquery.min.js"></script>
      
        <script src="../../javascripts/bootstrap.min.js"></script>
      
    
  </body>
</html>